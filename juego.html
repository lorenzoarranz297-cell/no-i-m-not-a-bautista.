<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>DEEP WEB - THE ROOM v5</title>
    <style>
        :root { --glow: #00ff41; --bg: #050505; }
        body { margin: 0; background: #000; color: var(--glow); font-family: 'Courier New', monospace; overflow: hidden; }

        #viewport {
            width: 100vw; height: 100vh;
            perspective: 1200px;
            display: flex; align-items: center; justify-content: center;
        }

        #room {
            width: 1000px; height: 600px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.2, 0, 0.2, 1);
            transform: translateZ(-500px) rotateY(0deg);
        }

        .wall {
            position: absolute; width: 1000px; height: 600px;
            background: #0a0a0a; border: 4px solid #111;
            display: flex; align-items: center; justify-content: center;
            backface-visibility: hidden;
        }

        .front { transform: rotateY(0deg) translateZ(500px); } 
        .right { transform: rotateY(-90deg) translateZ(500px); } 
        .left  { transform: rotateY(90deg) translateZ(500px); } 

        /* INTERFAZ PC */
        .pc-screen {
            width: 850px; height: 500px;
            background: #111; border: 15px solid #222;
            display: flex; flex-direction: column; overflow: hidden; position: relative;
        }
        .tabs { display: flex; background: #222; padding: 5px; gap: 2px; }
        .tab { background: #333; padding: 8px; cursor: pointer; font-size: 10px; border: none; color: #888; }
        .tab.active { background: #444; color: var(--glow); }
        .web-content { flex-grow: 1; background: #fff; color: #333; overflow-y: scroll; padding: 20px; font-family: sans-serif; }

        /* OBJETOS */
        .door { width: 220px; height: 420px; background: #000; border: 8px solid #1a1a1a; transition: 0.2s; position: relative; }
        .window-frame { width: 320px; height: 320px; background: #000; border: 10px solid #222; position: relative; overflow: hidden; }
        .curtain { 
            position: absolute; width: 50%; height: 100%; background: #2b0b0b; 
            transition: transform 0.5s ease; z-index: 2; border: 1px solid #1a0505;
        }
        .curtain.left-c { left: 0; }
        .curtain.right-c { right: 0; }
        .curtain.open { transform: translateX(-90%); }
        .curtain.right-c.open { transform: translateX(90%); }

        /* NOTAS */
        #notepad-container {
            position: absolute; right: 20px; bottom: 20px;
            width: 160px; height: 160px; background: #feff9c; padding: 10px;
            color: #000; box-shadow: 5px 5px 15px rgba(0,0,0,0.8);
        }
        #notepad { width: 100%; height: 90px; border: none; background: transparent; resize: none; font-size: 18px; outline: none; font-family: 'Comic Sans MS', cursive; }

        #jumpscare {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: #000; color:white; display:none;
            z-index: 9999; font-size: 40px; text-align: center; padding-top: 35vh;
        }
        
        .hud { position: fixed; bottom: 20px; width: 100%; text-align: center; color: #444; font-size: 12px; }
    </style>
</head>
<body>

<div id="viewport">
    <div id="room">
        <div class="wall front">
            <div class="pc-screen">
                <div class="tabs">
                    <button class="tab active" onclick="showPage(0)">AMAZON_DARK</button>
                    <button class="tab" onclick="showPage(1)">AUTO_EXOTIC</button>
                    <button class="tab" onclick="showPage(2)">LAND_SALE</button>
                </div>
                <div class="web-content" id="browser-body"></div>
                <div id="notepad-container">
                    <strong>MEMO:</strong>
                    <textarea id="notepad" placeholder="Escribe aquí..."></textarea>
                    <button onclick="checkWin()" style="width:100%; cursor:pointer;">SUBIR</button>
                </div>
            </div>
        </div>

        <div class="wall right">
            <div style="text-align: center;">
                <div class="door" id="main-door"></div>
                <p id="door-label" style="margin-top:20px">PRESIONA [E] PARA ESCUCHAR</p>
            </div>
        </div>

        <div class="wall left">
            <div style="text-align: center;">
                <div class="window-frame">
                    <div class="curtain left-c" id="c1"></div>
                    <div class="curtain right-c" id="c2"></div>
                </div>
                <p style="margin-top:20px">[E] CORTINAS</p>
            </div>
        </div>
    </div>
</div>

<div id="jumpscare">TE HE VISTO</div>
<div class="hud">A / D: Girar | W / S: Monitor | E: Interactuar</div>

<script>
    let currentRotation = 0;
    let danger = 0;
    let curtainsOpen = false;
    const room = document.getElementById('room');
    const note = document.getElementById('notepad');

    const codes = [
        String.fromCharCode(65 + Math.floor(Math.random() * 26)),
        String.fromCharCode(65 + Math.floor(Math.random() * 26)),
        String.fromCharCode(65 + Math.floor(Math.random() * 26))
    ];

    const pages = [
        `<h3>Amazon Marketplace - Ofertas</h3>
         <div style="height:400px; border:1px solid #eee; padding:10px">
            <p><strong>Cámara Térmica PRO</strong></p>
            <p>Detecta calor a través de paredes. Ideal para seguridad nocturna.</p>
            <p>Precio: $299.00 - Código de envío: ${codes[0]} (Premium)</p>
            <hr>
            <p><strong>Linterna Táctica</strong></p>
            <p>10000 lúmenes. No dejes que se acerquen en la oscuridad.</p>
         </div>`,
        `<h3>Luxury Auto Sales</h3>
         <div style="height:400px; background:#f9f9f9; padding:10px">
            <p>Ferrari Testarossa 1984 - Color Blanco</p>
            <p>Un clásico de los 80. Solo para coleccionistas serios.</p>
            <p>Referencia del motor: VIN-${codes[1]}X99</p>
            <div style="width:100%; height:150px; background:#333; color:white; display:flex; align-items:center; justify-content:center">IMAGEN_DEL_VEHICULO</div>
         </div>`,
        `<h3>Bienes Raíces: Terrenos Aislados</h3>
         <div style="height:400px; padding:10px">
            <p>Se vende isla privada en el Pacífico.</p>
            <p>Totalmente fuera de la red. Nadie te encontrará aquí.</p>
            <p>Certificado de propiedad número: ${codes[2]}77-B</p>
            <p>Scrollea para ver más...</p>
            <div style="height:300px"></div>
            <p>Fin del listado.</p>
         </div>`
    ];

    function showPage(index) {
        document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i === index));
        document.getElementById('browser-body').innerHTML = pages[index];
    }
    showPage(0);

    // Sistema de Controles
    window.addEventListener('keydown', (e) => {
        const key = e.key.toUpperCase();
        
        // Si presionamos A o D, quitamos el foco del bloc de notas para poder rotar
        if (key === 'A' || key === 'D' || key === 'W' || key === 'S') {
            note.blur(); 
        }

        if (key === 'D') { currentRotation = -90; } 
        else if (key === 'A') { currentRotation = 90; } 
        else if (key === 'W' || key === 'S') { currentRotation = 0; }

        if (key === 'E') {
            if (currentRotation === 90) { // En la ventana
                curtainsOpen = !curtainsOpen;
                document.getElementById('c1').classList.toggle('open', curtainsOpen);
                document.getElementById('c2').classList.toggle('open', curtainsOpen);
            }
            if (currentRotation === -90) { // En la puerta
                interactDoor();
            }
        }
        
        updateCamera();
    });

    function updateCamera() {
        room.style.transform = `translateZ(-500px) rotateY(${currentRotation}deg)`;
    }

    function interactDoor() {
        const door = document.getElementById('main-door');
        const label = document.getElementById('door-label');
        
        // Animación de "acercarse"
        room.style.transform = `translateZ(-200px) rotateY(-90deg)`;
        label.innerText = "ESCUCHANDO...";
        
        setTimeout(() => {
            updateCamera();
            label.innerText = "PRESIONA [E] PARA ESCUCHAR";
            if(danger > 20) danger -= 15; // Bajar el miedo
        }, 800);
    }

    // Gameloop
    setInterval(() => {
        if (curtainsOpen) danger += 1.2;
        danger += 0.3;

        // Visual de peligro
        if (danger > 75) {
            document.getElementById('main-door').style.boxShadow = "0 0 30px red";
        } else {
            document.getElementById('main-door').style.boxShadow = "none";
        }

        if (danger > 100) triggerScare();
    }, 100);

    function checkWin() {
        const input = note.value.trim().toUpperCase();
        if (input === codes.join("")) {
            alert("CONEXIÓN CERRADA CON ÉXITO. ESTÁS A SALVO.");
            location.reload();
        } else {
            danger += 30;
            alert("CÓDIGO ERRÓNEO. ALGO SE ACERCA.");
        }
    }

    function triggerScare() {
        document.getElementById('jumpscare').style.display = 'block';
        setTimeout(() => location.reload(), 3000);
    }
</script>

</body>
</html>